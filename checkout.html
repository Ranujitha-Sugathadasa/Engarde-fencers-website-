<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Checkout page</title>
    <!--    <link rel="stylesheet" href="ExternalStyle.css">-->
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>

</head>

<body>
    <section id="top">
        <h4>ENGARDE FENCERS</h4>
        <h2>Thank you for shopping with us!</h2>
        <p>#StayHome#StaySafe</p>

    </section>
    <form id="checkout-form">

        <div class="info">
            <h4>To complete your order please fill the required fields</h4>

            <div class="personal">

                <h3>Personal Infomation</h3>
                <label for="fname">Full Name<span>*</span></label>
                <input type="text" id="fname" name="fname" placeholder="amadee ranasinghe" required>

                <label for="email">Email<span>*</span></label>
                <input type="email" id="email" name="email" placeholder="amadee@gmail.com" required>

                <label for="address">Address<span>*</span></label>
                <input type="text" id="address" name="address" placeholder="34/B,Pepiliyana rd,Pepilyana. " required>


                <label for="city">City<span>*</span></label>
                <input type="text" id="city" name="city" placeholder="Nugegoda" required>


                <label for="state">State(Country)</label>
                <input type="text" id="state" name="state" placeholder="srilanka">


                <label for="zip">Zip<span>*</span></label>
                <input type="text" id="zip" name="zip" placeholder="zip" required>
            </div>


            <div class="billing">
                <h3>Payment information</h3>


                <label for="cname">Name on Card<span>*</span></label>
                <input type="text" id="cname" name="cardname" placeholder="amadee ranasinghe" required>

                <label for="ccnum">Credit card number<span>*</span></label>
                <input type="text" id="ccnum" name="cardnumber" placeholder="1234-5678-9123" required>
                <div class="flexRow">
                    <div class="flexColumn">
                        <label for="expmonth">Exp Month<span>*</span></label>
                        <input type="text" id="expmonth" name="expmonth" placeholder="July" required>
                    </div>
                    <div class="flexColumn">
                        <label for="expyear">Exp Year<span>*</span></label>
                        <input type="text" id="expyear" name="expyear" placeholder="2023" required>
                    </div>
                    <div class="flexColumn">
                        <label for="cvv">CVV<span>*</span></label>
                        <input type="text" id="cvv" name="cvv" placeholder="1234" required>
                    </div>
                </div>
            </div>

            <div class="addCart">
                <div id="cart-items">
                    <h3>Cart</h3>
                </div>
                <div id="total-price"></div>
                <button id="checkout-btn" type="submit" onclick="submitForm()">proceed to checkout</button>

            </div>

        </div>

    </form>

    <script>
        // Retrieve the cart items from the browser storage
        const cartItemsArray = JSON.parse(localStorage.getItem('cartItems')); //json code

        // Display the cart items on the page
        const cartItemsElement = document.getElementById('cart-items');
        if (cartItemsArray !== null) {

            for (let i = 0; i < cartItemsArray.length; i++) {
                const cartItem = cartItemsArray[i];
                const cartItemElement = document.createElement('div');
                cartItemElement.classList.add('cart-item')
                cartItemElement.innerHTML = `
                <img src="${cartItem.image}" alt="${cartItem.title}">
                <div>
                    <div>${cartItem.title}</div>
                    <div>${cartItem.price}</div>
                    <div>${cartItem.quantity}</div>
                </div>
                `;
                cartItemsElement.appendChild(cartItemElement);
            }
        }

        // Display the total price on the page
        const totalPrice = JSON.parse(localStorage.getItem('totalPrice'));
        const totalPriceElement = document.getElementById('total-price');
        if (totalPrice !== null) {
            totalPriceElement.innerText = `Total price: Rs ${totalPrice}`;
        }


        function submitForm() {
            // Get a reference to the form
            event.preventDefault(); 

            const form = document.querySelector('form');

            // Check if the form is valid
            if (form.checkValidity()) {
                // Submit the form
                form.submit();
                // Prompt an alert message indicating the order was placed successfully
                alert('Order placed successfully!');
                // Redirect to the home.html page
                window.location.href = "shop.html";
            } else {
                // Show an alert message indicating there are errors on the form
                alert('Please fill all the fields correctly.');
            }
        }





    </script>


</body>

</html>